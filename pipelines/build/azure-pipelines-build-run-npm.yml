trigger: none

variables:
  - group: CONTINUOUS_CLEARING_TOOL_TEST_CONFIG

stages:
  - template: ../build/templates/azure-pipelines-clearing-tool-stage-template.yml
    parameters:
      stageName: npm
      displayName: "Build and Run the CA Tool against NPM package type"
      sw360Url: $(SW360_URL)
      sw360Token: $(SW360_TOKEN)
      sw360ProjectId: 80ea2219c1dc488c867ba952d578b053
      sw360ProjectName: "Test-NPM"
      fossologyUrl: $(FOSSOLOGY_URL)
      JfrogUrl: $(JFROG_URL)
      JfrogToken: $(JFROG_TOKEN)
      JfrogDryRun: true
      projectDefinitions:
        - projectType: 'npm'
          inputFolder: $(Build.SourcesDirectory)/ca-tool-config-and-testdata/dependency-locks/npm
      outputFolder: $(Build.SourcesDirectory)/continuous-clearing/boms
      appSettingsPath: $(Build.SourcesDirectory)/ca-tool-config-and-testdata/settings/appsettings.json
