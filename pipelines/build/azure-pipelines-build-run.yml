trigger: none

variables:
  - group: CONTINUOUS_CLEARING_TOOL_TEST_CONFIG


stages:
    ##################################################
    #                    NPM                         #
    ##################################################
  - template: ../templates/build/azure-pipelines-clearing-tool-build-run-stage-template.yml
    parameters:
      stageName: npm
      displayName: "B&R CA Tool NPM"
      sw360Url: $(SW360_URL)
      sw360Token: $(SW360_TOKEN)
      sw360ProjectId: 80ea2219c1dc488c867ba952d578b053
      sw360ProjectName: "Test-NPM"
      fossologyUrl: $(FOSSOLOGY_URL)
      JfrogUrl: $(JFROG_URL)
      JfrogToken: $(JFROG_TOKEN)
      JfrogDryRun: true
      projectDefinitions:
        - projectType: 'npm'
          inputFolder: $(Build.SourcesDirectory)/ca-tool-config-and-testdata/dependency-locks/npm
      outputFolder: $(Build.SourcesDirectory)/continuous-clearing/boms
      appSettingsPath: $(Build.SourcesDirectory)/ca-tool-config-and-testdata/settings/appsettings.json

    ##################################################
    #                    CONAN                       #
    ##################################################

  - template: ../templates/build/azure-pipelines-clearing-tool-build-run-stage-template.yml
    parameters:
      stageName: conan
      displayName: "B&R CA Tool CONAN"
      sw360Url: $(SW360_URL)
      sw360Token: $(SW360_TOKEN)
      sw360ProjectId: f36c5cc520664d1f91fe659931a3ea58
      sw360ProjectName: "Test-Conan"
      fossologyUrl: $(FOSSOLOGY_URL)
      JfrogUrl: $(JFROG_URL)
      JfrogToken: $(JFROG_TOKEN)
      JfrogDryRun: true
      projectDefinitions:
        - projectType: 'conan'
          inputFolder: $(Build.SourcesDirectory)/ca-tool-config-and-testdata/dependency-locks/conan
      outputFolder: $(Build.SourcesDirectory)/continuous-clearing/boms
      appSettingsPath: $(Build.SourcesDirectory)/ca-tool-config-and-testdata/settings/appsettings.json